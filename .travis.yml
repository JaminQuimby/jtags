language: node_js
sudo: required
dist: trusty
git:
  depth: 10
branches:
  only:
  - master
  - "/^[0-9]+\\.[0-9]+\\.[0-9]+.*/"
cache:
  directories:
  - node_modules
before_install:
- export CHROME_BIN=/usr/bin/google-chrome
- export DISPLAY=:99.0
- sh -e /etc/init.d/xvfb start
- sudo apt-get update
- sudo apt-get install -y libappindicator1 fonts-liberation
- wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb
- sudo dpkg -i google-chrome*.deb
- rm google-chrome*.deb
- npm install -g @blackbaud/skyux-cli
after_success:
  - skyux build-public-library
before_deploy:
  - cd dist
deploy:
  provider: npm
  email: jaminquimby@hotmail.com
  skip_cleanup: true
  api_key:
    secure: Xc3IvVbBUWB1HK5CYZDPunYmv/HKzirr9jAlz29curjoW6po0GNtk2UIipW2T88ZDuHPQdn1twxaZ+uFg0m+wJunce7AgVSjeRCjebGkNK3hi/7fxBgQQItT8k1MbB29vD0xajhadleW9sUKRd1ipx9LOhho0WY7LZn3wH7cueNq+oUfLH8vgwgKrzS6HyMpAA/xWFFuXKUEDlF8doTVh+1TewoqK0zqKydJUFgBuAxys98mXLkZ9pswEUu9dTPlSLrh0LtWZfPu+LSa9ZrqSx0PWf2eI8fHg/gIWEJFxoHD8N6Vgp33/1WnwAjOqD7rWYj+HbjzoKcAp0ZxKbBpmbh/1H4fF3bMLWZnlGiB94VKSlpH2HIWUlMIj1ktH47666UTxGI+2LGgI7Dqe+kiZ6O9noksWk792z7UvYqSJfR4AETbu8jvI/JGsCaRF57zoUluaS8UGdxYUR7M60RMYlILYGfralAd/+pfQHnHew22+tYDyTWEqfPmnlcNME3JhQIY6MfP7m7b6kJwefWivZ64rgRLW/AoW4Qp1E4GBYROG6oMRaOSieBo8W2uKevyTD3zxeXQD9hK4c3iP36eHihoh5EwdkEaoQ8o5BFRicbwRq+R/y803sMON1jHqD/p6p16hM9K8jmfc3UtKyS+FfNIUsX53zwqecP8S6M1CPQ=
  on:
    tags: true
    repo: JaminQuimby/jtags
